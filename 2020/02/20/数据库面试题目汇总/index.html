<!DOCTYPE html>
<html>
<head>
    
<!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'true', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<!-- End Google Analytics -->


    

    



    <meta charset="utf-8">
    
    <meta name="google-site-verification" content="google-site-verification=6xKBD4e783W5YvEkBJE-d7v5QxyEqF7MRInlhMNq8YU">
    
    
    
    
    <title>数据库面试题目汇总 | JR&#39;s Blog | 直挂云帆济沧海</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="数据库,面试经验">
    <meta name="description" content="对于关系型数据库，尤其是Mysql的面试内容的汇总，最好和Redis那一部分结合来看。">
<meta property="og:type" content="article">
<meta property="og:title" content="数据库面试题目汇总">
<meta property="og:url" content="jiangren.work/2020/02/20/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%9D%A2%E8%AF%95%E9%A2%98%E7%9B%AE%E6%B1%87%E6%80%BB/">
<meta property="og:site_name" content="JR&#39;s Blog">
<meta property="og:description" content="对于关系型数据库，尤其是Mysql的面试内容的汇总，最好和Redis那一部分结合来看。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://uk-1259555870.cos.eu-frankfurt.myqcloud.com/20200220105505.png">
<meta property="og:image" content="https://uk-1259555870.cos.eu-frankfurt.myqcloud.com/20200220105528.png">
<meta property="og:image" content="https://uk-1259555870.cos.eu-frankfurt.myqcloud.com/20200220105559.png">
<meta property="og:image" content="https://uk-1259555870.cos.eu-frankfurt.myqcloud.com/20200220142608.png">
<meta property="article:published_time" content="2020-02-20T06:44:06.000Z">
<meta property="article:modified_time" content="2020-03-26T13:11:06.000Z">
<meta property="article:author" content="Jiang Ren">
<meta property="article:tag" content="数据库">
<meta property="article:tag" content="面试经验">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://uk-1259555870.cos.eu-frankfurt.myqcloud.com/20200220105505.png">
    
        <link rel="alternate" type="application/atom+xml" title="JR&#39;s Blog" href="/atom.xml">
    
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/style.css?v=1.7.2">
    <link rel="stylesheet" href="/css/prism/prism-tomorrow-night.css?v=1.7.2">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-list-ul"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/MapleStory.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/fong.jpg" style="max-width: 100%;">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Jiang Ren</h5>
          <a href="mailto:jiangren@whu.edu.cn" title="jiangren@whu.edu.cn" class="mail">jiangren@whu.edu.cn</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives/"  >
                <i class="icon icon-lg icon-archives"></i>
                归档
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories/"  >
                <i class="icon icon-lg icon-th-list"></i>
                分类
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags/"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/JiangRRRen" target="_blank" rel="noopener"  >
                <i class="icon icon-lg icon-github"></i>
                代码
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">数据库面试题目汇总</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">数据库面试题目汇总</h1>
        <h5 class="subtitle">
            
                <time datetime="2020-02-20T06:44:06.000Z" itemprop="datePublished" class="page-time">
  2020-02-20
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#1-数据库基本概念"><span class="post-toc-text">1. 数据库基本概念</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-1-三个范式"><span class="post-toc-text">1.1 三个范式</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-2-什么是存储过程？"><span class="post-toc-text">1.2 什么是存储过程？</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-3-什么是视图"><span class="post-toc-text">1.3 什么是视图</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-4-超键、候选键、主键、外键是什么？"><span class="post-toc-text">1.4 超键、候选键、主键、外键是什么？</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-5-什么是事务的隔离级别？"><span class="post-toc-text">1.5 什么是事务的隔离级别？</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-6-MySQL存储引擎有哪些？"><span class="post-toc-text">1.6 MySQL存储引擎有哪些？</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-7-关系型数据库和非关系型数据库的区别"><span class="post-toc-text">1.7 关系型数据库和非关系型数据库的区别</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#2-SQL语句"><span class="post-toc-text">2. SQL语句</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2-1-drop、truncate、delete区别"><span class="post-toc-text">2.1 drop、truncate、delete区别</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2-2-varchar-和-char区别"><span class="post-toc-text">2.2 varchar 和 char区别</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2-3-各种join"><span class="post-toc-text">2.3 各种join</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2-4-SQL约束有哪些"><span class="post-toc-text">2.4 SQL约束有哪些</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#3-索引"><span class="post-toc-text">3. 索引</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-1-什么是索引，什么时候使用索引？"><span class="post-toc-text">3.1 什么是索引，什么时候使用索引？</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-2-构建索引常用的数据结构有哪些"><span class="post-toc-text">3.2 构建索引常用的数据结构有哪些</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-3-聚集索引和非聚集索引区别？"><span class="post-toc-text">3.3 聚集索引和非聚集索引区别？</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-4-为什么底层用B-树而不是红黑树？"><span class="post-toc-text">3.4 为什么底层用B+树而不是红黑树？</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-5-索引失效的条件有哪些？"><span class="post-toc-text">3.5 索引失效的条件有哪些？</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#4-提高性能的方法"><span class="post-toc-text">4. 提高性能的方法</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#4-1-SQL语句优化的步骤是什么？"><span class="post-toc-text">4.1 SQL语句优化的步骤是什么？</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#4-2-优化SQL语句的方法有哪些？"><span class="post-toc-text">4.2 优化SQL语句的方法有哪些？</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#4-3-数据库连接池的作用"><span class="post-toc-text">4.3 数据库连接池的作用</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#4-4-什么是MVCC"><span class="post-toc-text">4.4 什么是MVCC</span></a></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-数据库面试题目汇总"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">数据库面试题目汇总</h1>
        <div class="post-meta">
            <time class="post-time" title="2020-02-20 14:44:06" datetime="2020-02-20T06:44:06.000Z"  itemprop="datePublished">2020-02-20</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


            
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p>对于关系型数据库，尤其是Mysql的面试内容的汇总，最好和Redis那一部分结合来看。<a id="more"></a></p>
<h1 id="1-数据库基本概念"><a href="#1-数据库基本概念" class="headerlink" title="1. 数据库基本概念"></a>1. 数据库基本概念</h1><h2 id="1-1-三个范式"><a href="#1-1-三个范式" class="headerlink" title="1.1 三个范式"></a>1.1 三个范式</h2><p>范式，即Normal Form，指的是我们在构建数据库所需要遵守的规则和指导方针。</p>
<ul>
<li>首先要明确的是：<strong>满足第三范式，那么就一定满足第二范式、满足第二范式就一定满足第一范式</strong></li>
<li>第一范式：<strong>字段是最小的的单元不可再分</strong>。即<strong>列的原子性</strong>。<ul>
<li>学生信息组成学生信息表，有年龄、性别、学号等信息组成。这些字段都不可再分，所以它是满足第一范式的</li>
</ul>
</li>
<li>第二范式：满足第一范式,<strong>表中的字段必须完全依赖于全部主键而非部分主键。</strong><ul>
<li>比如一个订单表中有主键（订单id，商品id）和单位价格、折扣、数量、产品名称、产品保质期。保质期只依赖于商品id，不符合第二范式。</li>
</ul>
</li>
<li>第三范式：满足第二范式，<strong>非主键外的所有字段必须互不依赖</strong><ul>
<li>换句话说：<strong>数据只能存在一个表中</strong>，消除互相依赖</li>
<li>比如大学学院表中包含了学院id，院领导，院简介，如果在学生信息表中也包括了院领导，院简介这些字段，这就重复了。</li>
</ul>
</li>
</ul>
<h2 id="1-2-什么是存储过程？"><a href="#1-2-什么是存储过程？" class="headerlink" title="1.2 什么是存储过程？"></a>1.2 什么是存储过程？</h2><p>存储过程就是一段SQL语句的<strong>预编译集合</strong>，<strong>封装了一组sql语句，实现某些操作，类似于函数的功能</strong>。</p>
<p>好处：</p>
<ul>
<li>将代码封装起来，隐藏复杂的商业逻辑</li>
<li>预编译，执行效率高</li>
<li>可以接受参数，可以回传值</li>
</ul>
<p>坏处：</p>
<ul>
<li>针对特定的某种数据库，不兼容，难维护</li>
</ul>
<h2 id="1-3-什么是视图"><a href="#1-3-什么是视图" class="headerlink" title="1.3 什么是视图"></a>1.3 什么是视图</h2><p>视图是从一个或多个表导出的<strong>虚拟的表</strong>，具<strong>有普通表的结构，但是不实现数据存储。</strong></p>
<p>作用：</p>
<ul>
<li><strong>直观</strong></li>
<li><strong>安全</strong>性，暴露出视图，然后把不想让用户看到和修改的内容屏蔽掉</li>
<li><strong>独立</strong>性，屏蔽了真实表的结构带来的影响。</li>
</ul>
<p>缺点：</p>
<ul>
<li>性能差：视图是由一个复杂的多表查询所定义</li>
<li>修改限制： 当用户试图修改视图的某些信息时，数据库必须把它转化为对基本表的某些信息的修改</li>
</ul>
<h2 id="1-4-超键、候选键、主键、外键是什么？"><a href="#1-4-超键、候选键、主键、外键是什么？" class="headerlink" title="1.4 超键、候选键、主键、外键是什么？"></a>1.4 超键、候选键、主键、外键是什么？</h2><p>假设有如下两个表：</p>
<ul>
<li><p>学生（学号，姓名，性别，身份证号，班级，教师编号）</p>
</li>
<li><p>教师（教师编号，姓名，工资）</p>
</li>
</ul>
<p><strong>超键</strong>：能唯一标识某条数据属性的<strong>集合</strong>。比如(学号)、(学号+姓名)、(身份证号+性别)等等。</p>
<p><strong>候选键</strong>：最小的超键。比如（学号）、（身份证号）。</p>
<p><strong>主键</strong>：人为规定的一个候选键，作为数据的身份象征。</p>
<p><strong>外键</strong>：用于描述两个表的关系，比如学生表中包含了班主任信息(教师编号)，这个就是外键。</p>
<h2 id="1-5-什么是事务的隔离级别？"><a href="#1-5-什么是事务的隔离级别？" class="headerlink" title="1.5 什么是事务的隔离级别？"></a>1.5 什么是事务的隔离级别？</h2><p><strong>脏读</strong>：一个事务A正在访问并修改数据，他设置了数据但还没有提交，另一个事务B读到了<strong>未提交的数据</strong>。但是A可能发现出错了<strong>回滚</strong>了数据，导致B得到的数据是错的。</p>
<p><img src="https://uk-1259555870.cos.eu-frankfurt.myqcloud.com/20200220105505.png"  style="zoom:75%;display: block; margin: 0px auto; vertical-align: middle;"></p>
<p><strong>不可重复读</strong>：一个事务正在访问并修改数据，另一个事务多次读取，前后读取的数据并不相同，导致这种读取结果不可复现。</p>
<p><img src="https://uk-1259555870.cos.eu-frankfurt.myqcloud.com/20200220105528.png"  style="zoom:75%;display: block; margin: 0px auto; vertical-align: middle;"></p>
<p><strong>幻读</strong>：事务A正在访问并修改数据，另一个事务B也要读取修改，事务B读取时检查数据不存在符合插入条件，但在B插入之前，A插入了数据，B插入时突然发现有问题了，就像见了鬼一样。幻读侧重<strong>读-写</strong>，不可重复读侧重<strong>读-读</strong></p>
<p><img src="https://uk-1259555870.cos.eu-frankfurt.myqcloud.com/20200220105559.png"  style="zoom:75%;display: block; margin: 0px auto; vertical-align: middle;"></p>
<p>事务隔离级别有四个：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>脏读</th>
<th>不可重复读</th>
<th>幻读</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Read uncommitted</td>
<td>√</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td>Read committed</td>
<td>×</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td>Repeatable read</td>
<td>×</td>
<td>×</td>
<td>√</td>
</tr>
<tr>
<td>Serializable</td>
<td>×</td>
<td>×</td>
<td>×</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>Read committed要求必须读取已提交的数据。</li>
<li>Repeatable read要求读取过程中，其他事务不能修改(图中第一次读取第二次读取中间都算读取过程)，然而读取-写入却不算在内，因此依然有幻读风险。</li>
<li>Serializable要求按串行读取，效率低。</li>
</ul>
<h2 id="1-6-MySQL存储引擎有哪些？"><a href="#1-6-MySQL存储引擎有哪些？" class="headerlink" title="1.6 MySQL存储引擎有哪些？"></a>1.6 MySQL存储引擎有哪些？</h2><p>最常见的是InnoDB和MyISAM</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">Innodb</th>
<th style="text-align:center">myisam</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">事务</td>
<td style="text-align:center">支持</td>
<td style="text-align:center">不支持</td>
</tr>
<tr>
<td style="text-align:center">外键</td>
<td style="text-align:center">支持</td>
<td style="text-align:center">不支持</td>
</tr>
<tr>
<td style="text-align:center">全文本搜索</td>
<td style="text-align:center">不支持</td>
<td style="text-align:center">支持</td>
</tr>
<tr>
<td style="text-align:center">使用场景</td>
<td style="text-align:center">频繁修改</td>
<td style="text-align:center">查询和插入为主</td>
</tr>
</tbody>
</table>
</div>
<p>另外还有MEMORY，存储在内存中，速度快，安全性不高。</p>
<h2 id="1-7-关系型数据库和非关系型数据库的区别"><a href="#1-7-关系型数据库和非关系型数据库的区别" class="headerlink" title="1.7 关系型数据库和非关系型数据库的区别"></a>1.7 关系型数据库和非关系型数据库的区别</h2><p>关系型数据库</p>
<ul>
<li>优点：易于理解，支持SQL可用于复杂查询</li>
<li>缺点：读写性能差，高并发能力差</li>
</ul>
<p>非关系型数据库NoSQL</p>
<ul>
<li>优点：键值对存储，读写性能高；键值对读写，数据没有耦合性，易拓展</li>
<li>缺点：缺乏sql支持，不适用于复杂查询</li>
</ul>
<h1 id="2-SQL语句"><a href="#2-SQL语句" class="headerlink" title="2. SQL语句"></a>2. SQL语句</h1><h2 id="2-1-drop、truncate、delete区别"><a href="#2-1-drop、truncate、delete区别" class="headerlink" title="2.1 drop、truncate、delete区别"></a>2.1 drop、truncate、delete区别</h2><ul>
<li>不再需要一张表的时候，用drop</li>
<li>想删除部分数据行时候，用delete，并且带上where子句</li>
<li><strong>保留表而删除所有数据</strong>的时候用truncate</li>
</ul>
<h2 id="2-2-varchar-和-char区别"><a href="#2-2-varchar-和-char区别" class="headerlink" title="2.2 varchar 和 char区别"></a>2.2 varchar 和 char区别</h2><p>前者可变长度，后者固定长度</p>
<h2 id="2-3-各种join"><a href="#2-3-各种join" class="headerlink" title="2.3 各种join"></a>2.3 各种join</h2><p><strong>left join</strong> 左关联，主表在左边，右边为从表。如果左侧的主表中没有关联字段，会用null 填满。<strong>right join</strong>相反</p>
<p><strong>inner join</strong> 内关联只会显示主表和从表相关联的字段，不会出现null</p>
<p><img src="https://uk-1259555870.cos.eu-frankfurt.myqcloud.com/20200220142608.png"  style="zoom:75%;display: block; margin: 0px auto; vertical-align: middle;"></p>
<p><strong>cross join</strong>则是将两个表的字段两两组合，比如A表有4个，B表有3个，则crossjoin出来就有12个</p>
<h2 id="2-4-SQL约束有哪些"><a href="#2-4-SQL约束有哪些" class="headerlink" title="2.4 SQL约束有哪些"></a>2.4 SQL约束有哪些</h2><ul>
<li>NOT NULL: 用于控制字段的内容一定不能为空（NULL）。</li>
<li>UNIQUE: 控件字段内容不能重复，一个表允许有多个 Unique 约束。</li>
<li>PRIMARY KEY: 也是用于控件字段内容不能重复，但它在一个表只允许出现一个。</li>
<li>FOREIGN KEY: 设置外键约束，假设表1是主表，表2是附表，学号作为外键。那么，如果表2要插入一条数据，表1必须有个学号；同理，如果表1要删除1条数据，表2必须先删除。</li>
<li>CHECK: 用于控制字段的值范围。</li>
</ul>
<h1 id="3-索引"><a href="#3-索引" class="headerlink" title="3. 索引"></a>3. 索引</h1><h2 id="3-1-什么是索引，什么时候使用索引？"><a href="#3-1-什么是索引，什么时候使用索引？" class="headerlink" title="3.1 什么是索引，什么时候使用索引？"></a>3.1 什么是索引，什么时候使用索引？</h2><p>索引本身就是一种<strong>数据结构</strong>，用于加快查找速度，InnoDB和MyISAM都是用的B+树。</p>
<ul>
<li>经常需要查询，经常使用SELECT和WHERE操作时，可以使用索引</li>
<li>经常做表连接</li>
<li>经常出现在order by、group by、distinct 后面的字段中，可以建立索引</li>
</ul>
<p>索引的缺点在于：<strong>增删改浪费时间，构建索引需要占据空间</strong></p>
<h2 id="3-2-构建索引常用的数据结构有哪些"><a href="#3-2-构建索引常用的数据结构有哪些" class="headerlink" title="3.2 构建索引常用的数据结构有哪些"></a>3.2 构建索引常用的数据结构有哪些</h2><div class="table-container">
<table>
<thead>
<tr>
<th>结构</th>
<th>区别</th>
</tr>
</thead>
<tbody>
<tr>
<td>Hash</td>
<td>只存储对应的哈希值，查找速度快，不能排序,不能进行范围查询</td>
</tr>
<tr>
<td>B+</td>
<td>数据有序,范围查询</td>
</tr>
</tbody>
</table>
</div>
<h2 id="3-3-聚集索引和非聚集索引区别？"><a href="#3-3-聚集索引和非聚集索引区别？" class="headerlink" title="3.3 聚集索引和非聚集索引区别？"></a>3.3 聚集索引和非聚集索引区别？</h2><div class="table-container">
<table>
<thead>
<tr>
<th>索引</th>
<th>区别</th>
</tr>
</thead>
<tbody>
<tr>
<td>聚集索引</td>
<td>数据按索引顺序存储，数据行的物理顺序与列值的<strong>顺序相同</strong></td>
</tr>
<tr>
<td>非聚集索引</td>
<td>存储指向真正数据行的指针</td>
</tr>
</tbody>
</table>
</div>
<p>聚集索引如下</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">地址</th>
<th style="text-align:left">id</th>
<th style="text-align:left">username</th>
<th style="text-align:left">score</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">0x01</td>
<td style="text-align:left">1</td>
<td style="text-align:left">小明</td>
<td style="text-align:left">90</td>
</tr>
<tr>
<td style="text-align:left">0x02</td>
<td style="text-align:left">2</td>
<td style="text-align:left">小红</td>
<td style="text-align:left">80</td>
</tr>
<tr>
<td style="text-align:left">0x03</td>
<td style="text-align:left">3</td>
<td style="text-align:left">小华</td>
<td style="text-align:left">92</td>
</tr>
</tbody>
</table>
</div>
<p>非聚集索引就不是按照地址存储，每一个都有一个指针，指向不同地方。</p>
<h2 id="3-4-为什么底层用B-树而不是红黑树？"><a href="#3-4-为什么底层用B-树而不是红黑树？" class="headerlink" title="3.4 为什么底层用B+树而不是红黑树？"></a>3.4 为什么底层用B+树而不是红黑树？</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">树</th>
<th style="text-align:center">区别</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">红黑树</td>
<td style="text-align:center">增加，删除，红黑树会进行频繁的调整，来保证红黑树的性质，浪费时间</td>
</tr>
<tr>
<td style="text-align:center">B树也就是B-树</td>
<td style="text-align:center">B树，查询性能不稳定，查询结果高度不致，每个结点保存指向真实数据的指针，相比B+树每一层每屋存储的元素更多，显得更高一点。</td>
</tr>
<tr>
<td style="text-align:center">B+树</td>
<td style="text-align:center">B+树相比较于另外两种树,显得更矮更宽，查询层次更浅</td>
</tr>
</tbody>
</table>
</div>
<h2 id="3-5-索引失效的条件有哪些？"><a href="#3-5-索引失效的条件有哪些？" class="headerlink" title="3.5 索引失效的条件有哪些？"></a>3.5 索引失效的条件有哪些？</h2><ul>
<li><p>在where子句中进行null值判断</p>
<pre><code class="lang-sql">SELECT id FROM table WHERE num is null

在建立数据库的时候因尽量为字段设置默认值,如int类型可以使用0,varchar类型使用 &#39;&#39;
</code></pre>
</li>
<li><p>避免在where子句中使用<code>or</code>来连接条件,<strong>因为如果俩个字段中有一个没有索引的话,引擎会放弃索引而产生全表扫描</strong></p>
</li>
<li><p>避免在where子句中使用<code>like</code>模糊查询</p>
</li>
</ul>
<h1 id="4-提高性能的方法"><a href="#4-提高性能的方法" class="headerlink" title="4. 提高性能的方法"></a>4. 提高性能的方法</h1><h2 id="4-1-SQL语句优化的步骤是什么？"><a href="#4-1-SQL语句优化的步骤是什么？" class="headerlink" title="4.1 SQL语句优化的步骤是什么？"></a>4.1 SQL语句优化的步骤是什么？</h2><p><strong>（1）发现有问题的SQL</strong></p>
<p>读取MYSQL的慢查询日志，记录在MySQL中响应时间超过阈值的语句，可以查询出执行的次数多占用的时间长的SQL。</p>
<p><strong>（2）通过EXPLAIN关键字分析SQL</strong></p>
<p>使用 EXPLAIN 关键字可以知道MySQL是如何处理你的SQL语句的</p>
<p><strong>（3）进行优化</strong></p>
<h2 id="4-2-优化SQL语句的方法有哪些？"><a href="#4-2-优化SQL语句的方法有哪些？" class="headerlink" title="4.2 优化SQL语句的方法有哪些？"></a>4.2 优化SQL语句的方法有哪些？</h2><p><strong>（1）选择最有效率的表名顺序</strong></p>
<p>数据库的解析器规则：<strong>FROM子句中写在最后的表将被最先处理</strong>，因此：</p>
<ul>
<li>如果是多个表连接查询，将<strong>引用最多</strong>的表放在最后，优先处理可以加快后续的速度。</li>
</ul>
<p><strong>（2）where的连接顺序</strong></p>
<p>自<strong>右而左的顺序解析WHERE子句</strong></p>
<ul>
<li>可以过滤掉最大数量记录的条件写在WHERE右边</li>
</ul>
<p><strong>（3）多使用内部函数提高SQL效率</strong></p>
<p>比如，使用mysql的concat()函数会比使用||来进行拼接快，因为concat()函数已经被mysql优化过了。</p>
<p><strong>（4）建立索引</strong></p>
<p>建立条件，参看3.1</p>
<h2 id="4-3-数据库连接池的作用"><a href="#4-3-数据库连接池的作用" class="headerlink" title="4.3 数据库连接池的作用"></a>4.3 数据库连接池的作用</h2><p>维护一定数量的连接，减少重新创建连接的时间</p>
<h2 id="4-4-什么是MVCC"><a href="#4-4-什么是MVCC" class="headerlink" title="4.4 什么是MVCC"></a>4.4 什么是MVCC</h2><p>MVCC，Multi-Version Concurrency Control，多版本并发控制。</p>
<p>使用MVCC时，不会直接用新数据覆盖旧数据，而是<strong>将旧数据标记为过时并在别处增加新版本的数据。</strong>允许读者读取在他读之前已经存在的数据，即使这些在读的过程中半路被别人修改、删除了，也对先前正在读的用户没有影响。</p>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        

        
        文章发布地址：<a href="/2020/02/20/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%9D%A2%E8%AF%95%E9%A2%98%E7%9B%AE%E6%B1%87%E6%80%BB/" target="_blank" rel="external">jiangren.work/2020/02/20/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%9D%A2%E8%AF%95%E9%A2%98%E7%9B%AE%E6%B1%87%E6%80%BB/</a>
        
    </div>
    
    <footer>
        <a href="jiangren.work">
            <img src="/img/fong.jpg" alt="Jiang Ren">
            Jiang Ren
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E7%BB%8F%E9%AA%8C/" rel="tag">面试经验</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=jiangren.work/2020/02/20/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%9D%A2%E8%AF%95%E9%A2%98%E7%9B%AE%E6%B1%87%E6%80%BB/&title=《数据库面试题目汇总》 — JR's Blog&pic=jiangren.work/img/fong.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=jiangren.work/2020/02/20/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%9D%A2%E8%AF%95%E9%A2%98%E7%9B%AE%E6%B1%87%E6%80%BB/&title=《数据库面试题目汇总》 — JR's Blog&source=对于关系型数据库，尤其是Mysql的面试内容的汇总，最好和Redis那一部分结合来看。" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=jiangren.work/2020/02/20/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%9D%A2%E8%AF%95%E9%A2%98%E7%9B%AE%E6%B1%87%E6%80%BB/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《数据库面试题目汇总》 — JR's Blog&url=jiangren.work/2020/02/20/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%9D%A2%E8%AF%95%E9%A2%98%E7%9B%AE%E6%B1%87%E6%80%BB/&via=jiangren.work" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=jiangren.work/2020/02/20/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%9D%A2%E8%AF%95%E9%A2%98%E7%9B%AE%E6%B1%87%E6%80%BB/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2020/02/22/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E9%9D%A2%E8%AF%95%E9%A2%98%E7%9B%AE%E6%B1%87%E6%80%BB/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">数据结构面试题目汇总</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2020/02/19/Linux%E9%9D%A2%E8%AF%95%E9%A2%98%E9%A2%98%E7%9B%AE%E6%B1%87%E6%80%BB/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Linux面试题题目汇总</h4>
      </a>
    </div>
  
</nav>



    





















</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        感谢支持！
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/true" alt="打赏二维码">
        </div>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


            <p>
                
                    <span>
                        <a href="/atom.xml" target="_blank" class="rss" title="rss">
                            <i class="icon icon-lg icon-rss"></i>
                        </a>
                    </span>
                    
                        <span>
                            博客内容遵循 <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a>
                        </span>
            </p>
    </div>
    <div class="bottom">
        <p>
            <span>
                Jiang Ren &copy;
                    
                        2019 -
                            
                                2020
            </span>
            <span>
                
                        Power by
                        <a href="http://hexo.io/" target="_blank">Hexo</a> Theme
                        <a href="https://github.com/abelsu7/hexo-theme-indigo-plus" target="_blank">indigo plus</a>
                        <p>Hosted by <a href="https://pages.github.com" target="_blank" style="font-weight: bold">Github Pages</a></p>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>
<a href="javascript:;" id="gobottom" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-comments"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=jiangren.work/2020/02/20/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%9D%A2%E8%AF%95%E9%A2%98%E7%9B%AE%E6%B1%87%E6%80%BB/&title=《数据库面试题目汇总》 — JR's Blog&pic=jiangren.work/img/fong.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=jiangren.work/2020/02/20/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%9D%A2%E8%AF%95%E9%A2%98%E7%9B%AE%E6%B1%87%E6%80%BB/&title=《数据库面试题目汇总》 — JR's Blog&source=对于关系型数据库，尤其是Mysql的面试内容的汇总，最好和Redis那一部分结合来看。" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=jiangren.work/2020/02/20/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%9D%A2%E8%AF%95%E9%A2%98%E7%9B%AE%E6%B1%87%E6%80%BB/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《数据库面试题目汇总》 — JR's Blog&url=jiangren.work/2020/02/20/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%9D%A2%E8%AF%95%E9%A2%98%E7%9B%AE%E6%B1%87%E6%80%BB/&via=jiangren.work" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=jiangren.work/2020/02/20/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%9D%A2%E8%AF%95%E9%A2%98%E7%9B%AE%E6%B1%87%E6%80%BB/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="//api.qrserver.com/v1/create-qr-code/?data=jiangren.work/2020/02/20/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%9D%A2%E8%AF%95%E9%A2%98%E7%9B%AE%E6%B1%87%E6%80%BB/" alt="微信分享二维码">
</div>




    <script src="//cdn.jsdelivr.net/npm/node-waves@0.7.6/src/js/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="/js/main.min.js?v=1.7.2"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.7.2" async></script>



<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<script async src="//cdn.jsdelivr.net/npm/mathjax@2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script>
<!-- <script async src="//cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script> -->
<!-- <script async src="//cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script> -->




<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




<script src="/js/prism.min.js?v=1.7.2"></script>
<script src="/js/prism-vim.min.js?v=1.7.2"></script>
</body>
</html>
